var WHEEL_CATEGORYBITS=2,TRUCK_CATEGORYBITS=4,OTHER_CATEGORYBITS=8,PLATFORM_CATEGORYBITS=16,ALLTOUCH_CATEGORYBITS=32,WHEEL_MASKBITS=58,TRUCK_MASKBITS=60,OTHER_MASKBITS=46,PLATFORM_MASKBITS=54,ALLTOUCH_MASKBITS=62;window.jt={phy_debug:!1,trace:!1,showFPS:!1,worldScale:1,cursors:null,left:!1,right:!1,up:!1,down:!1,pause:!1,mobileup:!1,mobiledown:!1,mobileright:!1,mobileleft:!1,music:!0,sound:!0,menu_in_state:0,current_level:0,game_data:null,game_menu:null,game_bg:null,game_fail:null,well_done:null,truck_speed:!1,truck_move:0,sfx:null,balloonForce:{min:200,max:800,currentHorizontal:0,currentVertical:0,speedHorozontal:3.5,speedVertical:7},initInput:function(t){this.cursors=t.input.keyboard.createCursorKeys()},androidfpsSetup:function(t,e,s,o,i){t.time.physicsElapsed=1/s,t.physics.box2d.ptmRatio=e,t.physics.box2d.velocityIterations=o,t.physics.box2d.positionIterations=i,t.physics.box2d.useElapsedTime=!0},gameController:function(t){buttonleft=t.add.button(50,430,"left_bt",null,this,0,1,0,1),buttonleft.fixedToCamera=!0,buttonleft.anchor.set(.5),buttonleft.events.onInputDown.add((function(){jt.mobileleft=!0})),buttonleft.events.onInputUp.add((function(){jt.mobileleft=!1})),buttonright=t.add.button(150,430,"right_bt",null,this,0,1,0,1),buttonright.fixedToCamera=!0,buttonright.anchor.set(.5),buttonright.events.onInputDown.add((function(){jt.mobileright=!0})),buttonright.events.onInputUp.add((function(){jt.mobileright=!1})),buttondown=t.add.button(t.width-150,430,"stop_img",null,this,0,1,0,1),buttondown.fixedToCamera=!0,buttondown.anchor.set(.5),buttondown.events.onInputDown.add((function(){jt.mobiledown=!0})),buttondown.events.onInputUp.add((function(){jt.mobiledown=!1})),buttonup=t.add.button(t.width-50,430,"go_img",null,this,0,1,0,1),buttonup.fixedToCamera=!0,buttonup.anchor.set(.5),buttonup.events.onInputDown.add((function(){jt.mobileup=!0})),buttonup.events.onInputUp.add((function(){jt.mobileup=!1}))},gameAction:function(t,e,s,o,i){var h=0,r=0;switch(i){case 1:h=1,r=12;break;case 2:8===jt.current_level?(h=1,r=12):(h=3,r=18);break;case 3:h=3,r=60;break;case 4:h=3,r=70;break;case 5:h=3,r=18;break;case 6:h=3,r=15;break;case 7:h=3,r=14===jt.current_level?55:12;break;case 8:h=3,r=24;break;case 9:h=2,r=15}this.cart=t.physics.box2d.getBody(e),this.koleso1=t.physics.box2d.getBody(s),this.koleso2=t.physics.box2d.getBody(o),(jt.up&&this.koleso1.GetAngularVelocity()<+(r+100)||jt.mobileup)&&(this.koleso1.ApplyTorque(6*r*h),this.koleso2.ApplyTorque(6*r),this.truck_speed=!0,this.truck_move<150&&(this.truck_move+=5)),(jt.down&&this.koleso1.GetAngularVelocity()>-(r+100)||jt.mobiledown)&&(this.koleso1.ApplyTorque(6*-r*h),this.koleso2.ApplyTorque(6*-r),this.truck_speed=!0,this.truck_move<150&&(this.truck_move+=5)),(jt.left||jt.mobileleft)&&(3!==i&&7!==i?this.cart.ApplyTorque(-315):this.cart.ApplyTorque(-450)),(jt.right||jt.mobileright)&&(3!=i&&7!==i?(this.cart.ApplyTorque(315),console.log(this.cart.m_torque)):this.cart.ApplyTorque(450))},gameBalloonAction:function(t,e,s){return void 0===s&&(s=1),1==s?this.gameBalloonActionType1(t,e):2==s?this.gameBalloonActionType2(t,e):void 0},gameBalloonActionType1:function(t,e){(jt.up||jt.mobileup)&&e.applyForce(0,-400),jt.up&&jt.mobileup||e.applyForce(0,-300),(jt.left||jt.mobileleft)&&e.applyForce(-220,0),(jt.right||jt.mobileright)&&e.applyForce(220,0)},gameBalloonActionType2:function(t,e){jt.up||jt.mobileup?(this.balloonForce.currentVertical+=this.balloonForce.speedVertical,this.balloonForce.currentVertical=this.balloonForce.currentVertical>this.balloonForce.max?this.balloonForce.max:this.balloonForce.currentVertical):this.balloonForce.currentVertical=this.balloonForce.min+200,jt.left||jt.mobileleft||jt.right||jt.mobileright?(this.balloonForce.currentHorizontal+=this.balloonForce.speedHorozontal,this.balloonForce.currentHorizontal=this.balloonForce.currentHorizontal>this.balloonForce.max?this.balloonForce.max:this.balloonForce.currentHorizontal):(this.balloonForce.currentHorizontal-=2*this.balloonForce.speedHorozontal,this.balloonForce.currentHorizontal=this.balloonForce.currentHorizontal<this.balloonForce.min?this.balloonForce.min:this.balloonForce.currentHorizontal),(jt.up||jt.mobileup)&&e.applyForce(0,-1*this.balloonForce.currentVertical),jt.up&&jt.mobileup||e.applyForce(0,-400),(jt.left||jt.mobileleft)&&e.applyForce(-1*this.balloonForce.currentHorizontal,0),(jt.right||jt.mobileright)&&e.applyForce(this.balloonForce.currentHorizontal,0)},resetInput:function(){jt.down=!1,jt.up=!1,jt.left=!1,jt.right=!1,jt.truck_speed=!1,jt.truck_move>0?jt.truck_move--:jt.truck_move=0},updateinput:function(){this.cursors.down.isDown&&!jt.down&&(jt.down=!0,jt.truck_bg=!0),this.cursors.up.isDown&&!jt.up&&(jt.up=!0,jt.truck_bg=!0),this.cursors.right.isDown&&!jt.right&&(jt.right=!0,jt.truck_bg_wobble=!0),this.cursors.left.isDown&&!jt.left&&(jt.left=!0,jt.truck_bg_wobble=!0)},createFlag:function(t,e,s,o,i){return this._fx=i.objects.Flag[0].x+i.objects.Flag[0].width/2,this._fy=i.objects.Flag[0].y+i.objects.Flag[0].height/2,this.base=null,this.base=new Phaser.Physics.Box2D.Body(t,null,this._fx,this._fy),this.base.setRectangle(60,80,0,0),this.base.static=!0,this.flag_bot=t.add.sprite(this._fx,this._fy-34,o),t.physics.box2d.enable(this.flag_bot),this.flag_bot.body.setRectangle(9,36,0,0),this.flag_bot.body.setCollisionCategory(PLATFORM_CATEGORYBITS),this.flag_bot.body.setCollisionMask(PLATFORM_MASKBITS),t.physics.box2d.revoluteJoint(this.base,this.flag_bot.body,0,-25,0,25,0,0,!1,0,5,!0),this.flag_mid=t.add.sprite(this._fx,this._fy-76,s),t.physics.box2d.enable(this.flag_mid),this.flag_mid.body.setRectangle(9,36,0,0),this.flag_mid.body.setCollisionCategory(PLATFORM_CATEGORYBITS),this.flag_mid.body.setCollisionMask(PLATFORM_MASKBITS),t.physics.box2d.revoluteJoint(this.flag_bot.body,this.flag_mid.body,0,-15,0,15,0,0,!1,0,6,!0),this.flag_head=t.add.sprite(this._fx+15,this._fy-114,e),t.physics.box2d.enable(this.flag_head),this.flag_head.body.setRectangle(9,36,-15,0),this.flag_head.body.setCollisionCategory(PLATFORM_CATEGORYBITS),this.flag_head.body.setCollisionMask(PLATFORM_MASKBITS),t.physics.box2d.revoluteJoint(this.flag_mid.body,this.flag_head.body,0,-15,-14,15,0,0,!1,0,6,!0),this._jot=t.physics.box2d.distanceJoint(this.base,this.flag_head.body,75,-60,-100,0,-10),{head:this.flag_head,middle:this.flag_mid,bottom:this.flag_bot,joint:this._jot,xpos:this._fx,ypos:this._fy}},InitData:function(){this._data={lastPlayed:"1",music:"1",sound:"1",levels:[{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"},{score:"0",star:"0"}]},window.localStorage&&window.localStorage.setItem("coolmath_jellytruck",JSON.stringify(this._data))},LoadData:function(){return window.localStorage?JSON.parse(window.localStorage.getItem("coolmath_jellytruck")):-1},SaveData:function(){window.localStorage&&window.localStorage.setItem("coolmath_jellytruck",JSON.stringify(this.game_data))},GetTotalScore:function(){if(window.localStorage){var t=JSON.parse(window.localStorage.getItem("coolmath_jellytruck"));this.total_score=0;for(var e=0;e<t.levels.length;e++)this.total_score+=parseInt(t.levels[e].score)}return this.total_score},getLevelPreScore:function(t){return[0,2271,2457,2353,2436,2520,2786,2385,2272,2356,2181,2066,2428,2279,2810,2129,2213,2440,2534,2161,2813,0][t]},getStar:function(t,e){var s=t+e,o=0;return s>.8*jt.getLevelPreScore(jt.current_level)&&(o=1),s>.9*jt.getLevelPreScore(jt.current_level)&&(o=2),s>1*jt.getLevelPreScore(jt.current_level)&&(o=3),o},updateCamera:function(t,e,s,o,i,h,r,l){if(this._cx=e.cx,this._cy=e.cy,this._focx=e.focx,this._focy=e.focy,this._focz=e.focz,this._mode=e.mode,this._zoom=e.zoom,this._width=e.width,this._height=e.height,this._levelZoom=e.levelZoom,this._scale=e.scale,h||r||l)this._zoom<this._levelZoom&&(this._zoom+=.005),h||l?(this._cx=(s-this._width/2)*this._zoom,this._cy=(o-this._height/2)*this._zoom,t.camera.x=this._cx,t.camera.y=this._cy,t.camera.scale.x=this._zoom,t.camera.scale.y=this._zoom):(t.camera.scale.x=this._zoom,t.camera.scale.y=this._zoom,t.camera.x=this._cx*this._zoom,t.camera.y=this._cy*this._zoom);else switch(e.mode){case 0:this._cx=(s-this._width/2)*this._zoom,this._cy=(o-this._height/2)*this._zoom,t.camera.x=this._cx,t.camera.y=this._cy,t.camera.scale.x=this._zoom,t.camera.scale.y=this._zoom,(jt.up||jt.down||jt.right||jt.left)&&i>10?this._zoom>this._scale&&(this._zoom-=.005):this._zoom<this._levelZoom&&(this._zoom+=.005);break;case 1:-1!=this._focx&&-1!=this._focy&&-1!=this._focz?(this._zoom>this._focz&&(this._zoom-=.005),this._cx=(s-this._width/2)*this._zoom,this._cy=(o-this._height/2)*this._zoom,t.camera.x=this._cx,t.camera.y=this._cy,t.camera.scale.x=this._zoom,t.camera.scale.y=this._zoom):(this._cx=(s-this._width/2)*this._zoom,this._cy=(o-this._height/2)*this._zoom)}return{cx:this._cx,cy:this._cy,focx:this._focx,focy:this._focy,focz:this._focz,mode:this._mode,zoom:this._zoom,width:this._width,height:this._height,levelZoom:this._levelZoom,scale:this._scale}},setupMenuBg:function(t){return this._bg=t.add.image(t.width/2,t.height/2,"menubg"),this._bg.anchor.set(.5),this._bg.fixedToCamera=!0,this._light=t.add.image(689,108,"bg_light"),this._light.fixedToCamera=!0,this._light.anchor.set(.6,.3),{background:this._bg,light:this._light}},setupScene:function(t,e,s,o,i,h,r,l){this._tx=e.objects.Truck[0].x+e.objects.Truck[0].width/2,this._ty=e.objects.Truck[0].y+e.objects.Truck[0].height/2,this._tt=e.objects.Truck[0].properties.type,this._sp=new Phaser.Physics.Box2D.Body(t,null,e.objects.Start[0].x+e.objects.Start[0].width/2,e.objects.Start[0].y+e.objects.Start[0].height/2,0),this._sp.setRectangle(e.objects.Start[0].width,e.objects.Start[0].height,0,0),this._sp.setCollisionCategory(OTHER_CATEGORYBITS),this._sp.setCollisionMask(OTHER_MASKBITS),this._sp.static=!0,this._ep=new Phaser.Physics.Box2D.Body(t,null,e.objects.End[0].x+e.objects.End[0].width/2,e.objects.End[0].y+e.objects.End[0].height/2,0),this._ep.setRectangle(e.objects.End[0].width,e.objects.End[0].height,0,0),this._ep.static=!0,this._ep.setCollisionCategory(OTHER_CATEGORYBITS),this._ep.setCollisionMask(OTHER_MASKBITS),t.camera.x=this._sp.x+e.objects.Start[0].width/2,t.camera.y=.5*t.height,t.world.setBounds(this._sp.x+e.objects.Start[0].width/2,0,this._ep.x-200,8e3),this._scene=t.add.image(o,i,s),this._scene.autoCull=!0,this._scene.checkWorldBounds=!0;var n=[];return e.objects.Ground.forEach((function(e){var s=new Phaser.Physics.Box2D.Body(t,null,e.x,e.y,0);if("ground"===e.type){for(var o=[],i=0;i<e.polyline.length;i++)o.push(e.polyline[i][0]),o.push(e.polyline[i][1]);s.setChain(o),s.friction=l,s.setCollisionCategory(OTHER_CATEGORYBITS),s.setCollisionMask(OTHER_MASKBITS),n.push(s)}})),{start_body:this._sp,end_body:this._ep,art:this._scene,truck_x:this._tx,truck_y:this._ty,truck_type:this._tt,grounds:n,bound_x:this._sp.x+e.objects.Start[0].width/2,bound_y:0,bound_w:this._ep.x-200,bound_h:8e3}},setupLegoScene:function(t,e,s,o,i){return this._tx=e.objects.Truck[0].x+e.objects.Truck[0].width/2,this._ty=e.objects.Truck[0].y+e.objects.Truck[0].height/2,this._tt=e.objects.Truck[0].properties.type,this._sp=new Phaser.Physics.Box2D.Body(t,null,e.objects.Start[0].x+e.objects.Start[0].width/2,e.objects.Start[0].y+e.objects.Start[0].height/2,0),this._sp.setRectangle(e.objects.Start[0].width,e.objects.Start[0].height,0,0),this._sp.setCollisionCategory(OTHER_CATEGORYBITS),this._sp.setCollisionMask(OTHER_MASKBITS),this._sp.static=!0,this._ep=new Phaser.Physics.Box2D.Body(t,null,e.objects.End[0].x+e.objects.End[0].width/2,e.objects.End[0].y+e.objects.End[0].height/2,0),this._ep.setRectangle(e.objects.End[0].width,e.objects.End[0].height,0,0),this._ep.static=!0,this._ep.setCollisionCategory(OTHER_CATEGORYBITS),this._ep.setCollisionMask(OTHER_MASKBITS),t.camera.x=this._sp.x+e.objects.Start[0].width/2,t.camera.y=.5*t.height,t.camera.width=400,t.world.setBounds(this._sp.x+e.objects.Start[0].width/2,0,this._ep.x,8e3),this._scene=t.add.image(o,i,s),{start_body:this._sp,end_body:this._ep,art:this._scene,truck_x:this._tx,truck_y:this._ty,truck_type:this._tt}},setupStaticObject:function(t,e,s){var o=[];return e.objects.Ground_Static.forEach((function(e){if("static"===e.type){this._tx=e.x,this._ty=e.y;var i=[e.polygon[0][0],e.polygon[0][1],e.polygon[1][0],e.polygon[1][1],e.polygon[2][0],e.polygon[2][1],e.polygon[3][0],e.polygon[3][1]],h=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0);h.setPolygon(i),h.friction=s,h.setCollisionCategory(OTHER_CATEGORYBITS),h.setCollisionMask(OTHER_MASKBITS),o.push(h)}})),o},setupMenuStaticObject:function(t,e){var s=[];return e.objects.Ground_Static.forEach((function(e){if("static"===e.type){this._tx=e.x,this._ty=e.y;var o=[e.polygon[0][0],e.polygon[0][1],e.polygon[1][0],e.polygon[1][1],e.polygon[2][0],e.polygon[2][1],e.polygon[3][0],e.polygon[3][1]],i=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0);i.setPolygon(o),i.friction=.2,i.setCollisionCategory(OTHER_CATEGORYBITS),i.setCollisionMask(OTHER_MASKBITS),s.push(i)}})),s},setupScoreObject:function(t,e){var s=[];return e.objects.Score_Point.forEach((function(e){if("score"===e.type){this._tx=e.x,this._ty=e.y;var o=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0);o.setPolygon([e.polygon[0][0],e.polygon[0][1],e.polygon[1][0],e.polygon[1][1],e.polygon[2][0],e.polygon[2][1],e.polygon[3][0],e.polygon[3][1]]),o.setCollisionCategory(OTHER_CATEGORYBITS),o.setCollisionMask(OTHER_MASKBITS),o.sensor=!0,s.push(o)}})),s},setupFailObject:function(t,e){var s=[];return e.objects.Fail.forEach((function(e){if("fail"===e.type&&(this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._fb=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0),this._fb.setRectangle(e.width,e.height),this._fb.setCollisionCategory(OTHER_CATEGORYBITS),this._fb.setCollisionMask(OTHER_MASKBITS),this._fb.static=!0,this._fb.sensor=!0,s.push(this._fb)),"touch"===e.type){this._tx=e.x,this._ty=e.y;var o=[e.polygon[0][0],e.polygon[0][1],e.polygon[1][0],e.polygon[1][1],e.polygon[2][0],e.polygon[2][1],e.polygon[3][0],e.polygon[3][1]];this._fb=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0),this._fb.setPolygon(o),this._fb.setCollisionCategory(OTHER_CATEGORYBITS),this._fb.setCollisionMask(OTHER_MASKBITS),this._fb.static=!0,this._fb.sensor=!0,s.push(this._fb)}})),s},setupCameraObject:function(t,e){var s=[];return e.objects.Camera.forEach((function(e){"focus"===e.type&&(this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._cb=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0),this._cb.setRectangle(e.width,e.height),this._cb.setCollisionCategory(OTHER_CATEGORYBITS),this._cb.setCollisionMask(OTHER_MASKBITS),this._cb.static=!0,this._cb.sensor=!0,this._cb.m_userData={focusX:e.properties.focusX,focusY:e.properties.focusY,zoom:e.properties.zoom},s.push(this._cb))})),s},setupJointGround:function(t,e){var s;return e.objects.Joints.forEach((function(e){"ground"===e.type&&(this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,(s=new Phaser.Physics.Box2D.Body(t,null,this._tx,this._ty,0)).setRectangle(e.width,e.height),s.static=!0)})),s},setupJellyObj:function(t,e,s){var o=[],i=-10;return e.objects.Jelly_Obj.forEach((function(e){if("jelly"===e.type){this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._name=e.properties.obj_name,this._ox=e.properties.xoffset.toFixed(2),this._oy=e.properties.yoffset.toFixed(2);var h=new Jelly(t,this._img,this._tx,this._ty,s,_name,this._ox,this._oy,i);i--,o.push(h)}})),o},setupCrusher:function(t,e,s){var o=[];return e.objects.Crusher.forEach((function(e){if("crusher"===e.type){this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._speed=e.properties.speed.toFixed(2),this._torque=e.properties.torque.toFixed(2);var i=t.add.sprite(this._tx,this._ty,this._img);i.anchor.set(.5,.5),t.physics.box2d.enable(i),i.body.setCircle(65,0,0),i.body.friction=20,i.body.setCollisionCategory(PLATFORM_CATEGORYBITS),i.body.setCollisionMask(PLATFORM_MASKBITS),this.la=new box2d.b2Vec2,s.toLocalPoint(this.la,new box2d.b2Vec2(this._tx,this._ty)),t.physics.box2d.revoluteJoint(s,i.body,this.la.x,this.la.y,0,0,this._speed,this._torque,!0),o.push(i)}})),o},setupLegoObj:function(t,e,s){var o=[];return e.objects.Lego.forEach((function(e){if("bolt"==e.type){this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._physics_key=e.properties.physics_key,this._bolt=e.properties.bolt,this._fr=e.properties.friction.toFixed(2),this._rs=e.properties.bounce.toFixed(2),this.den=e.properties.mass.toFixed(2);var i=new Lego(t,this._tx,this._ty,this._img,this._physics_key,this._fr,this._rs,this.den);this._bolt&&(this._bs=e.properties.bolt_scale.toFixed(2),i.setBolt(this._tx,this._ty,this._bs)),o.push(i)}if("balanceBox"==e.type){this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._physics_key=e.properties.physics_key,this._bolt=e.properties.bolt,this._fr=e.properties.friction.toFixed(2),this._rs=e.properties.bounce.toFixed(2),this.den=e.properties.mass.toFixed(2);i=new Lego(t,this._tx,this._ty,this._img,this._physics_key,this._fr,this._rs,this.den);this._bolt&&(this._bs=e.properties.bolt_scale.toFixed(2),i.setBolt(this._tx,this._ty,this._bs)),o.push(i)}"mill"===e.type&&(this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._physics_key=e.properties.physics_key,this._speed=e.properties.speed.toFixed(2),this._torque=e.properties.torque.toFixed(2),this._motor=e.properties.motor,this._limit=e.properties.limit,this._low=e.properties.low.toFixed(2),this._up=e.properties.up.toFixed(2),this._bolt=e.properties.bolt,this._fr=e.properties.friction.toFixed(2),this._rs=e.properties.bounce.toFixed(2),this.den=e.properties.mass.toFixed(2),(i=new Lego(t,this._tx,this._ty,this._img,this._physics_key,this._fr,this._rs,this.den)).enableRevolute(s,this._speed,this._torque,this._motor,this._low,this._up,this._limit),this._bolt&&(this._bs=e.properties.bolt_scale.toFixed(2),i.setBolt(this._tx,this._ty,this._bs)),o.push(i));if("solid"==e.type){this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._physics_key=e.properties.physics_key,this._fr=e.properties.friction.toFixed(2),this.den=e.properties.mass.toFixed(2);var i=new Lego(t,this._tx,this._ty,this._img,this._physics_key,this._fr,0,this.den);o.push(i)}"platform"===e.type&&(this._tx=e.x+e.width/2,this._ty=e.y+e.height/2,this._img=e.properties.texture,this._physics_key=e.properties.physics_key,this._speed=e.properties.speed.toFixed(2),this._torque=e.properties.torque.toFixed(2),this._motor=e.properties.motor,this._limit=e.properties.limit,this._low=e.properties.low.toFixed(2),this._up=e.properties.up.toFixed(2),this._bolt=e.properties.bolt,this._fr=e.properties.friction.toFixed(2),this._rs=e.properties.bounce.toFixed(2),this.den=e.properties.mass.toFixed(2),(i=new Lego(t,this._tx,this._ty,this._img,this._physics_key,this._fr,this._rs,this.den)).enableRevolute(s,this._speed,this._torque,this._motor,this._low,this._up,this._limit),this._bolt&&(this._bs=e.properties.bolt_scale.toFixed(2),i.setBolt(this._tx,this._ty,this._bs)),o.push(i))})),o},dist:function(t,e,s,o){return Phaser.Math.distance(t,e,s,o)},createTruck:function(t,e,s,o,i){var h=null,r=null,l=null,n=null,c=null;switch(o){case 1:r=new Jelly(t,"Wheel",e-30,s,i,"Wheel1",.5,.5,-1),l=new Jelly(t,"Wheel",e+30,s,i,"Wheel1",.5,.5,-1),h=new Jelly(t,"Truck1",e,s,i,"Truck1",.5,.5,-1),this.xs=Math.cos(90*Math.PI/180),this.ys=Math.sin(90*Math.PI/180),this.xs=1e3*this.xs/1e3,this.ys=1e3*this.ys/1e3,(n=t.physics.box2d.revoluteJoint(h.getBox(),l.getBox(),30,l.getLocal().y,0,0)).collideConnected=!1,(c=t.physics.box2d.revoluteJoint(h.getBox(),r.getBox(),-30,r.getLocal().y,0,0)).collideConnected=!1;break;case 2:case 4:h=new Jelly(t,"Truck2",e,s,i,"Truck2",.5,.72,-1),r=new Jelly(t,"Wheel",e-30,s,i,"Wheel2",.5,.5,-1),l=new Jelly(t,"Wheel",e+30,s,i,"Wheel1",.5,.5,-1),this.xs=Math.cos(90*Math.PI/180),this.ys=Math.sin(90*Math.PI/180),this.xs=1e3*this.xs/1e3,this.ys=1e3*this.ys/1e3,(n=t.physics.box2d.revoluteJoint(h.getBox(),l.getBox(),28,l.getLocal().y,0,0)).collideConnected=!1,(c=t.physics.box2d.revoluteJoint(h.getBox(),r.getBox(),-38,r.getLocal().y-2,0,0)).collideConnected=!1;break;case 3:case 5:h=new Jelly(t,"Truck3",e,s,i,"Truck3",.5,.6,-1),r=new Jelly(t,"Wheel",e-45,s,i,"Wheel3",.5,.5,-1),l=new Jelly(t,"Wheel",e+45,s,i,"Wheel3",.5,.5,-1),this.xs=Math.cos(90*Math.PI/180),this.ys=Math.sin(90*Math.PI/180),this.xs=1e3*this.xs/1e3,this.ys=1e3*this.ys/1e3,(n=t.physics.box2d.revoluteJoint(h.getBox(),l.getBox(),45,l.getLocal().y,0,0)).collideConnected=!1,(c=t.physics.box2d.revoluteJoint(h.getBox(),r.getBox(),-45,r.getLocal().y,0,0)).collideConnected=!1}return{truck:h,back:r,front:l,joint1:n,joint2:c}}};